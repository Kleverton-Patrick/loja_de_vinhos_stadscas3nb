Index: src/main/webapp/TelaFinalizarCompra/FinalizarCompra.jsp
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><%@ page language=\"java\" contentType=\"text/html; charset=UTF-8\" pageEncoding=\"UTF-8\" %>\r\n<%@ page import=\"java.util.List\" %>\r\n<%@ taglib prefix=\"c\" uri=\"http://java.sun.com/jsp/jstl/core\" %>\r\n\r\n<!DOCTYPE html>\r\n<html lang=\"pt\">\r\n\r\n<head>\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <link rel=\"stylesheet\" href=\"TelaFinalizarCompra/FinalizarCompra.css\">\r\n    <link rel=\"stylesheet\" href=\"index.css\">\r\n    <title>Finalizar Compra</title>\r\n</head>\r\n\r\n<body>\r\n    <!-- Aqui fica o cabeçalho -->\r\n    <header class=\"header\">\r\n        <div class=\"container\">\r\n            <div class=\"logo\">\r\n                <a href=\"http://localhost:8080/\">\r\n                    <h1 class=\"logo-text\">WIN-E</h1>\r\n                </a>\r\n            </div>\r\n            <div class=\"suggestion-button\">\r\n                <!-- Se logado, exibe as informações do cliente e o botão de logout -->\r\n                <c:if test=\"${sessionScope.logadoUsuarioCliente != null}\">\r\n                    <span>Olá, ${sessionScope.logadoUsuarioCliente}</span>\r\n                    <a href=\"/saircliente\">Sair</a>\r\n                </c:if>\r\n            </div>\r\n        </div>\r\n    </header>\r\n\r\n    <!-- Conteúdo -->\r\n    <div class=\"detalhes-pedido\">\r\n        <h1>Detalhes do Pedido:</h1>\r\n\r\n        <p><strong>CPF Cliente</strong> ${carrinho.numCPF}</p>\r\n        <p><strong>Quantidade de itens do pedido:</strong> ${carrinho.qtdTotal}</p>\r\n        <p><strong>Valor total do pedido:</strong> ${carrinho.vlrTotal}</p>\r\n    </div>\r\n\r\n     <div>\r\n            <h1>Informações de pagamento:</h1>\r\n\r\n             <form action=\"/EncerrarCompra\" method=\"post\">\r\n\r\n\r\n                        <div>\r\n                            <label for=\"numCartao\">Número do cartão:</label>\r\n                            <input type=\"text\" id=\"numCartao\" name=\"numCartao\" required>\r\n                        </div>\r\n\r\n                        <div>\r\n                            <label for=\"dataValidade\">Data de validade:</label>\r\n                            <input type=\"text\" id=\"dataValidade\" name=\"dataValidade\" required>\r\n                        </div>\r\n\r\n                        <div>\r\n                            <label for=\"CVV\">CVV(Código de segurança):</label>\r\n                            <input type=\"text\" id=\"CVV\" name=\"CVV\" required>\r\n                        </div>\r\n\r\n                        <div>\r\n                            <label for=\"titularCartao\">Nome do titular do cartão:</label>\r\n                            <input type=\"text\" id=\"titularCartao\" name=\"titularCartao\" required>\r\n                        </div>\r\n\r\n             </form>\r\n\r\n        </div>\r\n\r\n    <div class=\"endereco-entrega\">\r\n        <h1>Endereço de entrega:</h1>\r\n\r\n        <p><strong>CEP:</strong> ${CEP}</p>\r\n        <p><strong>Endereço:</strong> ${endereco}</p>\r\n        <p><strong>Numero do endereço:</strong> ${numEndereco}</p>\r\n        <p><strong>Complemento:</strong> ${complEndereco}</p>\r\n        <p><strong>Bairro:</strong> ${bairro}</p>\r\n        <p><strong>Cidade:</strong> ${cidade}</p>\r\n        <p><strong>Estado:</strong> ${estado}</p>\r\n    </div>\r\n\r\n     <form action=\"/atualizarEndereco\" method=\"post\">\r\n\r\n                  <input type=\"hidden\" name=\"numCPF\" value=\"${carrinho.numCPF}\">\r\n                  <input type=\"hidden\" name=\"qtdTotal\" value=\"${carrinho.qtdTotal}\">\r\n                  <input type=\"hidden\" name=\"vlrTotal\" value=\"${carrinho.vlrTotal}\">\r\n\r\n                  <input type=\"hidden\" name=\"vlrTotal\" value=\"${carrinho.vlrTotal}\">\r\n                  <input type=\"hidden\" name=\"vlrTotal\" value=\"${carrinho.vlrTotal}\">\r\n\r\n\r\n                  <button type=\"submit\">Escolher outro endereço para entrega</button>\r\n            </form>\r\n\r\n    <!-- Lista de Produtos do Carrinho -->\r\n    <div class=\"lista-carrinho\">\r\n        <h1>Itens do Carrinho:</h1>\r\n        <table>\r\n            <thead>\r\n                <tr>\r\n                    <th>Foto do Produto</th>\r\n                    <th>Nome do Vinho</th>\r\n                    <th>Valor Unitário</th>\r\n                    <th>Quantidade</th>\r\n                    <th>Total</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <c:forEach var=\"item\" items=\"${listaCarrinho}\">\r\n                    <tr>\r\n                        <td><img src=\"${item.imagem}\" alt=\"Imagem do Produto\" width=\"100\"></td>\r\n                        <td>${item.descNomeVinho}</td>\r\n                        <td>R$ ${item.vlrProduto}</td>\r\n                        <td>${item.qtdProduto}</td>\r\n                        <td>R$ ${item.vlrProduto * item.qtdProduto}</td>\r\n                    </tr>\r\n                </c:forEach>\r\n            </tbody>\r\n        </table>\r\n        <form action=\"/EncerrarCompra\" method=\"post\">\r\n            <input type=\"hidden\" name=\"numCPF\" value=\"${carrinho.numCPF}\">\r\n            <button type=\"submit\" class=\"finalizar-compra-button\">Finalizar Compra</button>\r\n        </form>\r\n\r\n    </div>\r\n\r\n    <!-- Rodapé -->\r\n    <footer class=\"footer\">\r\n        <div>\r\n            <p>&copy; 2023 WIN-E. Todos os direitos reservados.</p>\r\n        </div>\r\n    </footer>\r\n</body>\r\n</html>\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/webapp/TelaFinalizarCompra/FinalizarCompra.jsp b/src/main/webapp/TelaFinalizarCompra/FinalizarCompra.jsp
--- a/src/main/webapp/TelaFinalizarCompra/FinalizarCompra.jsp	(revision af79a5f9048019b822c35cf90c486df7c08237e4)
+++ b/src/main/webapp/TelaFinalizarCompra/FinalizarCompra.jsp	(date 1700523933790)
@@ -73,6 +73,7 @@
     <div class="endereco-entrega">
         <h1>Endereço de entrega:</h1>
 
+        <input type="hidden" name="numSeqEntrega" value="${numSeqEntrega}">
         <p><strong>CEP:</strong> ${CEP}</p>
         <p><strong>Endereço:</strong> ${endereco}</p>
         <p><strong>Numero do endereço:</strong> ${numEndereco}</p>
@@ -87,9 +88,6 @@
                   <input type="hidden" name="numCPF" value="${carrinho.numCPF}">
                   <input type="hidden" name="qtdTotal" value="${carrinho.qtdTotal}">
                   <input type="hidden" name="vlrTotal" value="${carrinho.vlrTotal}">
-
-                  <input type="hidden" name="vlrTotal" value="${carrinho.vlrTotal}">
-                  <input type="hidden" name="vlrTotal" value="${carrinho.vlrTotal}">
 
 
                   <button type="submit">Escolher outro endereço para entrega</button>
Index: src/main/java/br/com/lojavinho/servlet/FinalizarCompraServlet.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package br.com.lojavinho.servlet;\r\n\r\nimport br.com.lojavinho.dao.CarrinhoDao;\r\nimport br.com.lojavinho.dao.ComprasDao;\r\nimport br.com.lojavinho.model.Carrinho;\r\nimport br.com.lojavinho.model.DadosEntrega;\r\nimport br.com.lojavinho.model.ItemCarrinho;\r\n\r\nimport java.io.IOException;\r\nimport java.sql.SQLException;\r\nimport java.util.List;\r\n\r\nimport javax.servlet.RequestDispatcher;\r\nimport javax.servlet.ServletException;\r\nimport javax.servlet.annotation.WebServlet;\r\nimport javax.servlet.http.HttpServlet;\r\nimport javax.servlet.http.HttpServletRequest;\r\nimport javax.servlet.http.HttpServletResponse;\r\nimport javax.servlet.http.HttpSession;\r\n\r\n@WebServlet(\"/FinalizarCompraServlet\")\r\npublic class FinalizarCompraServlet extends HttpServlet {\r\n    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws IOException, ServletException {\r\n        try {\r\n            String numCPF = request.getParameter(\"numCPF\");\r\n            String totalQtd = request.getParameter(\"totalQtd\");\r\n            String totalVlr = request.getParameter(\"totalVlr\");\r\n\r\n\r\n            if (CarrinhoDao.lerItemCarrinho(numCPF).isEmpty()) {\r\n                request.setAttribute(\"mensagem\", \"Seu carrinho está vazio. Selecione pelo menos um produto para compra.\");\r\n                RequestDispatcher dispatcher = request.getRequestDispatcher(\"/Carrinho/Carrinho.jsp\");\r\n                dispatcher.forward(request, response);\r\n                return;\r\n            }\r\n\r\n            ComprasDao comprasdao = new ComprasDao();\r\n            Carrinho carrinho = new Carrinho(numCPF, totalQtd, totalVlr);\r\n            boolean possuiEndereco = comprasdao.CPFpossuiEndereco(numCPF);\r\n\r\n            if (possuiEndereco) {\r\n                List<ItemCarrinho> listaCarrinho = CarrinhoDao.lerItemCarrinho(numCPF);\r\n\r\n                DadosEntrega dadosEntrega = ComprasDao.obterUltimaCompraPorCPF(numCPF);\r\n\r\n                request.setAttribute(\"CEP\", dadosEntrega.getCEP());\r\n                request.setAttribute(\"endereco\", dadosEntrega.getEndereco());\r\n                request.setAttribute(\"numEndereco\", dadosEntrega.getNumEndereco());\r\n                request.setAttribute(\"complEndereco\", dadosEntrega.getComplEndereco());\r\n                request.setAttribute(\"bairro\", dadosEntrega.getBairro());\r\n                request.setAttribute(\"cidade\", dadosEntrega.getCidade());\r\n                request.setAttribute(\"estado\", dadosEntrega.getEstado());\r\n\r\n                request.setAttribute(\"carrinho\", carrinho);\r\n\r\n                request.setAttribute(\"listaCarrinho\", listaCarrinho);\r\n\r\n                RequestDispatcher dispatcher = request.getRequestDispatcher(\"/TelaFinalizarCompra/FinalizarCompra.jsp\");\r\n                dispatcher.forward(request, response);\r\n            } else {\r\n\r\n                request.setAttribute(\"carrinho\", carrinho);\r\n\r\n\r\n                RequestDispatcher dispatcher = request.getRequestDispatcher(\"/TelaRegistrarEndereco/RegistrarEndereco.jsp\");\r\n                dispatcher.forward(request, response);\r\n            }\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n            response.sendError(HttpServletResponse.SC_INTERNAL_SERVER_ERROR, \"Erro ao processar a finalização da compra\");\r\n        }\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/*\r\n        if (session.getAttribute(\"logadoUsuarioCliente\") != null) {\r\n            String cliente = (String) session.getAttribute(\"logadoUsuarioCliente\");\r\n\r\n            DadosEntrega dadosEntrega = ComprasDao.obterUltimaCompraPorCPF(cliente);\r\n\r\n            if (dadosEntrega != null) {\r\n                // Adicione os dados à requisição para uso na JSP\r\n                request.setAttribute(\"enderecoUltimaCompra\", dadosEntrega.getEndereco());\r\n                request.setAttribute(\"cidadeUltimaCompra\", dadosEntrega.getCidade());\r\n                request.setAttribute(\"estadoUltimaCompra\", dadosEntrega.getEstado());\r\n            }\r\n\r\n            // Redirecione para a página de finalizar compra\r\n            RequestDispatcher dispatcher = request.getRequestDispatcher(\"/TelaFinalizarCompra/FinalizarCompra.jsp\");\r\n            dispatcher.forward(request, response);\r\n        } else {\r\n            // O cliente não está logado, redirecione para a página de login\r\n            response.sendRedirect(\"entrarCliente.jsp\");\r\n\r\n\r\n */\r\n\r\n\r\n\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/java/br/com/lojavinho/servlet/FinalizarCompraServlet.java b/src/main/java/br/com/lojavinho/servlet/FinalizarCompraServlet.java
--- a/src/main/java/br/com/lojavinho/servlet/FinalizarCompraServlet.java	(revision af79a5f9048019b822c35cf90c486df7c08237e4)
+++ b/src/main/java/br/com/lojavinho/servlet/FinalizarCompraServlet.java	(date 1700523933797)
@@ -43,6 +43,7 @@
 
                 DadosEntrega dadosEntrega = ComprasDao.obterUltimaCompraPorCPF(numCPF);
 
+                request.setAttribute("numSeqEntrega", dadosEntrega.getNumSeqEntrega());
                 request.setAttribute("CEP", dadosEntrega.getCEP());
                 request.setAttribute("endereco", dadosEntrega.getEndereco());
                 request.setAttribute("numEndereco", dadosEntrega.getNumEndereco());
Index: src/main/java/br/com/lojavinho/dao/ComprasDao.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package br.com.lojavinho.dao;\r\n\r\nimport br.com.lojavinho.config.ConnectionPoolConfig;\r\nimport br.com.lojavinho.model.Compras;\r\nimport br.com.lojavinho.model.DadosEntrega;\r\nimport br.com.lojavinho.model.ItemCarrinho;\r\n\r\nimport java.math.BigDecimal;\r\nimport java.sql.*;\r\nimport java.util.List;\r\n\r\npublic class ComprasDao {\r\n\r\n    public boolean CPFpossuiEndereco(String CPF) {\r\n\r\n        boolean existe = false;\r\n\r\n        try (Connection connection = ConnectionPoolConfig.getConnection()) {\r\n\r\n            String sql = \"SELECT * FROM DADOS_ENTREGA  WHERE NUM_CPF = ?\";\r\n\r\n            PreparedStatement statement = connection.prepareStatement(sql);\r\n\r\n            statement.setString(1, CPF);\r\n\r\n            try (ResultSet rs = statement.executeQuery()) {\r\n                existe = rs.next();\r\n            }\r\n\r\n        } catch (SQLException e) {\r\n            System.out.println(\"Fail in database connection\");\r\n            System.out.println(\"Error: \" + e.getMessage());\r\n        }\r\n\r\n        return existe;\r\n    }\r\n\r\n    public static DadosEntrega obterUltimaCompraPorCPF(String cpf) {\r\n\r\n        try (Connection connection = ConnectionPoolConfig.getConnection()) {\r\n            String sql = \"SELECT * FROM DADOS_ENTREGA  WHERE NUM_CPF = ? \";\r\n\r\n\r\n            PreparedStatement statement = connection.prepareStatement(sql);\r\n            statement.setString(1, cpf);\r\n\r\n            ResultSet resultSet = statement.executeQuery();\r\n\r\n            if (resultSet.next()) {\r\n                String CEP = resultSet.getString(\"COD_CEP\");\r\n                String endereco = resultSet.getString(\"DSC_ENDERECO\");\r\n                String numEndereco = resultSet.getString(\"NUM_ENDERECO\");\r\n                String complEndereco = resultSet.getString(\"DSC_COMPL_ENDERECO\");\r\n                String bairro = resultSet.getString(\"DSC_BAIRRO\");\r\n                String cidade = resultSet.getString(\"DSC_CIDADE\");\r\n                String estado = resultSet.getString(\"DSC_ESTADO\");\r\n\r\n\r\n                DadosEntrega dadosEntrega = new DadosEntrega(CEP, endereco, numEndereco, complEndereco, bairro, cidade, estado);\r\n\r\n                System.out.println(\"Encontrada compra registrada anteriormente para o CPF\");\r\n                connection.close();\r\n\r\n                return dadosEntrega;\r\n            } else {\r\n                System.out.println(\"Nenhuma compra registrada anteriormente para o CPF\");\r\n                connection.close();\r\n                return null;\r\n            }\r\n\r\n        } catch (SQLException e) {\r\n            System.out.println(\"Fail in database connection\");\r\n            System.out.println(\"Error: \" + e.getMessage());\r\n            return null;\r\n        }\r\n    }\r\n\r\n    public static int registrarCompra(Compras compra, List<ItemCarrinho> listaCarrinho) {\r\n        try (Connection connection = ConnectionPoolConfig.getConnection()) {\r\n\r\n            String sqlCompra = \"INSERT INTO COMPRA (DTA_OPERACAO, VLR_TOTAL_VENDA, FK_NUM_CPF) VALUES (?, ?, ?)\";\r\n            try (PreparedStatement preparedStatementCompra = connection.prepareStatement(sqlCompra, Statement.RETURN_GENERATED_KEYS)) {\r\n                preparedStatementCompra.setObject(1, compra.getDataOperacao());\r\n                preparedStatementCompra.setBigDecimal(2, compra.getValorTotalVenda());\r\n                preparedStatementCompra.setString(3, compra.getCpfCliente());\r\n                preparedStatementCompra.executeUpdate();\r\n\r\n                try (ResultSet generatedKeys = preparedStatementCompra.getGeneratedKeys()) {\r\n                    int compraId = -1;\r\n                    if (generatedKeys.next()) {\r\n                        compraId = generatedKeys.getInt(1);\r\n                    }\r\n\r\n                    String sqlItemCompra = \"INSERT INTO ITEM_COMPRA (DSC_NOME_VINHO, QTD_VENDIDA_PRODUTO, VLR_VENDIDO_PRODUTO, FK_NUM_SEQ_VINHO, FK_NUM_SEQ_COMPRA) VALUES (?, ?, ?, ?, ?)\";\r\n                    try (PreparedStatement preparedStatementItemCompra = connection.prepareStatement(sqlItemCompra)) {\r\n                        for (ItemCarrinho item : listaCarrinho) {\r\n                            preparedStatementItemCompra.setString(1, item.getDescNomeVinho());\r\n                            preparedStatementItemCompra.setInt(2, Integer.parseInt(item.getQtdProduto()));\r\n                            preparedStatementItemCompra.setBigDecimal(3, new BigDecimal(item.getVlrProduto()));\r\n                            preparedStatementItemCompra.setInt(4, Integer.parseInt(item.getNumSeqVinho()));\r\n                            preparedStatementItemCompra.setInt(5, compraId);\r\n                            preparedStatementItemCompra.addBatch();\r\n                        }\r\n                        preparedStatementItemCompra.executeBatch();\r\n\r\n                        return compraId;\r\n                    }\r\n                }\r\n            }\r\n        } catch (SQLException e) {\r\n            System.out.println(\"Fail in database connection or SQL query!\");\r\n            System.out.println(\"Error: \" + e.getMessage());\r\n            return -1;\r\n        }\r\n    }\r\n\r\n\r\n    public static Integer obterNumeroSequenciaPorCPF(String numCPF) {\r\n        String SQL = \"SELECT NUM_SEQUENCIA FROM COMPRAS WHERE CPF_CLIENTE = ?\";\r\n\r\n        try (Connection connection = ConnectionPoolConfig.getConnection();\r\n             PreparedStatement preparedStatement = connection.prepareStatement(SQL)) {\r\n\r\n            preparedStatement.setString(1, numCPF);\r\n\r\n            try (ResultSet resultSet = preparedStatement.executeQuery()) {\r\n                if (resultSet.next()) {\r\n                    return resultSet.getInt(\"NUM_SEQUENCIA\");\r\n                }\r\n            }\r\n\r\n        } catch (SQLException e) {\r\n            e.printStackTrace();\r\n\r\n        }\r\n\r\n        return null;\r\n    }\r\n}\r\n\r\n\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/java/br/com/lojavinho/dao/ComprasDao.java b/src/main/java/br/com/lojavinho/dao/ComprasDao.java
--- a/src/main/java/br/com/lojavinho/dao/ComprasDao.java	(revision af79a5f9048019b822c35cf90c486df7c08237e4)
+++ b/src/main/java/br/com/lojavinho/dao/ComprasDao.java	(date 1700523933783)
@@ -47,6 +47,7 @@
             ResultSet resultSet = statement.executeQuery();
 
             if (resultSet.next()) {
+                String numSeqEntrega = resultSet.getString("NUM_SEQ_ENTREGA");
                 String CEP = resultSet.getString("COD_CEP");
                 String endereco = resultSet.getString("DSC_ENDERECO");
                 String numEndereco = resultSet.getString("NUM_ENDERECO");
@@ -56,7 +57,7 @@
                 String estado = resultSet.getString("DSC_ESTADO");
 
 
-                DadosEntrega dadosEntrega = new DadosEntrega(CEP, endereco, numEndereco, complEndereco, bairro, cidade, estado);
+                DadosEntrega dadosEntrega = new DadosEntrega(numSeqEntrega, CEP, endereco, numEndereco, complEndereco, bairro, cidade, estado);
 
                 System.out.println("Encontrada compra registrada anteriormente para o CPF");
                 connection.close();
Index: ../ScriptBD/Scripts_Create_Tabelas.txt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>\r\nCREATE TABLE USUARIO_ADMIN(DSC_EMAIL_ADMIN VARCHAR(40) PRIMARY KEY,\r\n                           DSC_SENHA_ADMIN VARCHAR(20)\r\n);\r\n\r\n\r\n\r\n\r\nCREATE TABLE PAIS(NUM_SEQUENCIA INT PRIMARY KEY AUTO_INCREMENT,\r\n                  DSC_PAIS_PRODUTOR VARCHAR(40)\r\n);\r\n\r\nINSERT INTO PAIS (DSC_PAIS_PRODUTOR) VALUES\r\n('Italia'),\r\n('Espanha'),\r\n('Chile'),\r\n('Portugal'),\r\n('Argentina');\r\n\r\n\r\n\r\nCREATE TABLE TIPO_VINHO(NUM_SEQUENCIA INT PRIMARY KEY AUTO_INCREMENT,\r\n                        DSC_TIPO_VINHO VARCHAR(20)\r\n);\r\n\r\nINSERT INTO TIPO_VINHO (DSC_TIPO_VINHO) VALUES\r\n('Branco'),\r\n('Tinto'),\r\n('Rosé'),\r\n('Espumante');\r\n\r\n\r\n\r\n\r\nCREATE TABLE TIPO_UVA(NUM_SEQUENCIA INT PRIMARY KEY AUTO_INCREMENT,\r\n                      DSC_TIPO_UVA VARCHAR(20)\r\n);\r\n\r\nINSERT INTO TIPO_UVA (DSC_TIPO_UVA) VALUES\r\n('Chardonay'),\r\n('Carenet Sauvignon'),\r\n('Merlot'),\r\n('Syrah'),\r\n('Pinot noir'),\r\n('Tempranillo'),\r\n('Castelão'),\r\n('Sangiovese');\r\n\r\n\r\n\r\n\r\n\r\nCREATE TABLE HARMONIZACAO(NUM_SEQUENCIA INT PRIMARY KEY AUTO_INCREMENT,\r\n                          DSC_HARMONIZACAO VARCHAR(40)\r\n);\r\n\r\nINSERT INTO HARMONIZACAO (DSC_HARMONIZACAO) VALUES\r\n('Carne vermelha'),\r\n('Frutos do mar'),\r\n('Queijos'),\r\n('Sobremesa');\r\n\r\n\r\n\r\n\r\n\r\nCREATE TABLE VINHO(NUM_SEQUENCIA INT PRIMARY KEY AUTO_INCREMENT,\r\n                   DSC_NOME_VINHO VARCHAR(40),\r\n                   VLR_VENDA DECIMAL(9,2),\r\n                   QTD_ESTOQUE SMALLINT,\r\n                   FK_NUM_SEQ_PAIS INT NOT NULL,\r\n                   FOREIGN KEY(FK_NUM_SEQ_PAIS) REFERENCES PAIS(NUM_SEQUENCIA),\r\n                   FK_NUM_SEQ_TIPO_UVA INT NOT NULL,\r\n                   FOREIGN KEY(FK_NUM_SEQ_TIPO_UVA) REFERENCES TIPO_UVA(NUM_SEQUENCIA),\r\n\t\t   FK_NUM_SEQ_TIPO_VINHO INT NOT NULL,\r\n                   FOREIGN KEY(FK_NUM_SEQ_TIPO_VINHO) REFERENCES TIPO_VINHO(NUM_SEQUENCIA),\r\n                   FK_NUM_SEQ_HARMONIZACAO INT NOT NULL,\r\n                   FOREIGN KEY(FK_NUM_SEQ_HARMONIZACAO) REFERENCES HARMONIZACAO(NUM_SEQUENCIA),\r\n\t\t   DESCRICAO VARCHAR(255),\r\n\t\t   IMAGEM VARCHAR(255)\r\n);\r\n\r\n\r\n\r\nINSERT INTO VINHO (DSC_NOME_VINHO, VLR_VENDA, QTD_ESTOQUE,  FK_NUM_SEQ_PAIS, FK_NUM_SEQ_TIPO_UVA, FK_NUM_SEQ_TIPO_VINHO, FK_NUM_SEQ_HARMONIZACAO, DESCRICAO, IMAGEM) values \r\n('Santa carolina', 25.90 ,  20, 3, 3, 2 , 1,'Vinho santa carolina safra 2023' ,'/img/santaCarolina.jpg'),\r\n('Santa carolina Branco', 33.75 ,30 , 3, 2, 2, 2,'Vinho Santa Carolina Branco safra 2013' ,'/img/santaCarolinaBranco.jpg'),\r\n('Pata negra', 104.50 , 30, 2, 6, 2, 1,'Vinho pata negra safra 2018','/img/pataNegra.jpg'),\r\n('DV catena', 89.99 , 12, 5, 1, 1, 2,'Vinho DV Catena safra 2019','/img/dvCatena.jpg'),\r\n('Virrey Loreto', 55.00 , 30, 5, 4, 2, 3,'Vinho Virrey Loreto safra 2015','/img/virreyLoreto.jpg'),\r\n('Julia florista', 35.50 , 30, 4, 7, 2, 1,'Vinho Julia florista safra 2022','/img/juliaFlorista.jpg'),\r\n('Fonte Regia Chianti', 60.50 , 25, 1, 8, 2, 1,'Vinho Fonte Regia Chianti safra 2019','/img/fonteRegia.jpg');\r\n\r\n\r\n\r\n\r\nCREATE TABLE CLIENTE(NUM_CPF VARCHAR(14) PRIMARY KEY,\r\n                     DSC_NOME_CLIENTE VARCHAR(60),\r\n\t\t\t\t\t NUM_TELEFONE VARCHAR(15),\r\n\t\t\t\t\t DSC_EMAIL VARCHAR(40),\r\n\t\t\t\t\t DSC_SENHA VARCHAR(20)\r\n);\r\n\r\n\r\n\r\nCREATE TABLE COMPRA(NUM_SEQUENCIA INT PRIMARY KEY AUTO_INCREMENT, \r\n                    DTA_OPERACAO DATETIME, \r\n                    VLR_TOTAL_VENDA DECIMAL(11,2), \r\n                    FK_NUM_CPF VARCHAR(14), \r\n                    FOREIGN KEY(FK_NUM_CPF) REFERENCES CLIENTE(NUM_CPF) \r\n);\r\n\r\n\r\n\r\nCREATE TABLE ITEM_COMPRA(NUM_SEQUENCIA INT PRIMARY KEY AUTO_INCREMENT,\r\n                         DSC_NOME_VINHO VARCHAR(40),\r\n                         QTD_VENDIDA_PRODUTO SMALLINT,\r\n                         VLR_VENDIDO_PPRODUTO DECIMAL(9,2),\r\n                         FK_NUM_SEQ_VINHO INT NOT NULL,\r\n                         FOREIGN KEY(FK_NUM_SEQ_VINHO) REFERENCES VINHO(NUM_SEQUENCIA),\r\n                         FK_NUM_SEQ_COMPRA INT NOT NULL,\r\n                         FOREIGN KEY(FK_NUM_SEQ_COMPRA) REFERENCES COMPRA(NUM_SEQUENCIA)\r\n);\r\n\r\nCREATE TABLE DADOS_ENTREGA(NUM_SEQUENCIA INT PRIMARY KEY AUTO_INCREMENT, \r\n                           DSC_NOME_CLIENTE VARCHAR(60), \r\n                           NUM_CARTAO_CREDITO VARCHAR(16), \r\n                           COD_CEP VARCHAR(9), \r\n                           DSC_ENDERECO VARCHAR(100), \r\n                           NUM_ENDERECO INT, \r\n                           DSC_COMPL_ENDERECO VARCHAR(80), \r\n                           DSC_BAIRRO VARCHAR(40), \r\n                           DSC_CIDADE VARCHAR(40), \r\n                           DSC_ESTADO VARCHAR(40), \r\n                           FK_NUM_SEQ_COMPRA INT NOT NULL,\r\n                           FOREIGN KEY(FK_NUM_SEQ_COMPRA) REFERENCES COMPRA(NUM_SEQUENCIA)\r\n);\r\n\r\n\r\nCREATE TABLE ITEM_CARRINHO(NUM_SEQUENCIA INT PRIMARY KEY AUTO_INCREMENT,\r\n                           NUM_SEQ_VINHO INT,\r\n\t\t\t   DSC_NOME_VINHO VARCHAR(40),\r\n                           QTD_PRODUTO SMALLINT,\r\n                           VLR_PRODUTO DECIMAL(9,2),\r\n                           NUM_CPF VARCHAR(14),  \r\n\t\t\t   IMAGEM VARCHAR(255)                  \r\n);\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nCREATE TABLE CARRINHO(ID CHAR(10),\r\n\t\t      DSC_NOME_VINHO VARCHAR(40) \r\n      \t\t      VLR_VENDA DECIMAL(9,2),\r\n   \t\t      QTD SMALLINT\r\n);\r\n\r\nCREATE TABLE CARRINHO(NUM_CPF VARCHAR(14) PRIMARY KEY,\r\n                      QTD_TOTAL SMALLINT,\r\n                      VLR_TOTAL DECIMAL(11,2)\r\n);\r\n\r\nINSERT INTO CARRINHO(NUM_CPF, QTD_TOTAL, VLR_TOTAL)\r\n     VALUES ('111.111.111-11',5,280.00),\r\n\r\n________________________________________________________________\r\n\r\nCREATE TABLE DADOS_ENTREGA(NUM_CPF VARCHAR(14) PRIMARY KEY, \r\n                           COD_CEP VARCHAR(9), \r\n                           DSC_ENDERECO VARCHAR(100), \r\n                           NUM_ENDERECO VARCHAR(10), \r\n                           DSC_COMPL_ENDERECO VARCHAR(80), \r\n                           DSC_BAIRRO VARCHAR(40), \r\n                           DSC_CIDADE VARCHAR(40), \r\n                           DSC_ESTADO VARCHAR(40), \r\n );\r\n\r\nINSERT INTO DADOS_ENTREGA (NUM_CPF, COD_CEP, DSC_ENDERECO, NUM_ENDERECO, DSC_COMPL_ENDERECO, DSC_BAIRRO, DSC_CIDADE, DSC_ESTADO) VALUES\r\n('123.456.789-10', '09230-510' , 'Rua legal', '21', 'Casa', 'Vila Bela', 'São Paulo','SP');\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/../ScriptBD/Scripts_Create_Tabelas.txt b/../ScriptBD/Scripts_Create_Tabelas.txt
--- a/../ScriptBD/Scripts_Create_Tabelas.txt	(revision af79a5f9048019b822c35cf90c486df7c08237e4)
+++ b/../ScriptBD/Scripts_Create_Tabelas.txt	(date 1700518510951)
@@ -49,7 +49,6 @@
 
 
 
-
 CREATE TABLE HARMONIZACAO(NUM_SEQUENCIA INT PRIMARY KEY AUTO_INCREMENT,
                           DSC_HARMONIZACAO VARCHAR(40)
 );
@@ -122,20 +121,6 @@
                          FOREIGN KEY(FK_NUM_SEQ_COMPRA) REFERENCES COMPRA(NUM_SEQUENCIA)
 );
 
-CREATE TABLE DADOS_ENTREGA(NUM_SEQUENCIA INT PRIMARY KEY AUTO_INCREMENT, 
-                           DSC_NOME_CLIENTE VARCHAR(60), 
-                           NUM_CARTAO_CREDITO VARCHAR(16), 
-                           COD_CEP VARCHAR(9), 
-                           DSC_ENDERECO VARCHAR(100), 
-                           NUM_ENDERECO INT, 
-                           DSC_COMPL_ENDERECO VARCHAR(80), 
-                           DSC_BAIRRO VARCHAR(40), 
-                           DSC_CIDADE VARCHAR(40), 
-                           DSC_ESTADO VARCHAR(40), 
-                           FK_NUM_SEQ_COMPRA INT NOT NULL,
-                           FOREIGN KEY(FK_NUM_SEQ_COMPRA) REFERENCES COMPRA(NUM_SEQUENCIA)
-);
-
 
 CREATE TABLE ITEM_CARRINHO(NUM_SEQUENCIA INT PRIMARY KEY AUTO_INCREMENT,
                            NUM_SEQ_VINHO INT,
@@ -148,17 +133,6 @@
 
 
 
-
-
-
-
-
-
-
-
-
-
-
 CREATE TABLE CARRINHO(ID CHAR(10),
 		      DSC_NOME_VINHO VARCHAR(40) 
       		      VLR_VENDA DECIMAL(9,2),
@@ -173,7 +147,6 @@
 INSERT INTO CARRINHO(NUM_CPF, QTD_TOTAL, VLR_TOTAL)
      VALUES ('111.111.111-11',5,280.00),
 
-________________________________________________________________
 
 CREATE TABLE DADOS_ENTREGA(NUM_CPF VARCHAR(14) PRIMARY KEY, 
                            COD_CEP VARCHAR(9), 
@@ -182,11 +155,9 @@
                            DSC_COMPL_ENDERECO VARCHAR(80), 
                            DSC_BAIRRO VARCHAR(40), 
                            DSC_CIDADE VARCHAR(40), 
-                           DSC_ESTADO VARCHAR(40), 
+                           DSC_ESTADO VARCHAR(40)
  );
 
-INSERT INTO DADOS_ENTREGA (NUM_CPF, COD_CEP, DSC_ENDERECO, NUM_ENDERECO, DSC_COMPL_ENDERECO, DSC_BAIRRO, DSC_CIDADE, DSC_ESTADO) VALUES
-('123.456.789-10', '09230-510' , 'Rua legal', '21', 'Casa', 'Vila Bela', 'São Paulo','SP');
 
 
 
Index: src/main/java/br/com/lojavinho/servlet/AtualizarEndereco2Servlet.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package br.com.lojavinho.servlet;\r\n\r\nimport br.com.lojavinho.dao.CarrinhoDao;\r\nimport br.com.lojavinho.dao.ClienteDao;\r\nimport br.com.lojavinho.dao.ComprasDao;\r\nimport br.com.lojavinho.model.Carrinho;\r\nimport br.com.lojavinho.model.DadosEntrega;\r\nimport br.com.lojavinho.model.ItemCarrinho;\r\n\r\nimport javax.servlet.RequestDispatcher;\r\nimport javax.servlet.ServletException;\r\nimport javax.servlet.annotation.WebServlet;\r\nimport javax.servlet.http.HttpServlet;\r\nimport javax.servlet.http.HttpServletRequest;\r\nimport javax.servlet.http.HttpServletResponse;\r\nimport java.io.IOException;\r\nimport java.util.List;\r\n\r\n@WebServlet(\"/AtualizarEndereco2\")\r\npublic class AtualizarEndereco2Servlet extends HttpServlet  {\r\n\r\n    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\r\n\r\n        String CPF = request.getParameter(\"numCPF\");\r\n        String CEP = request.getParameter(\"CEP\");\r\n        String endereco = request.getParameter(\"endereco\");\r\n        String numero = request.getParameter(\"numero\");\r\n        String complemento = request.getParameter(\"complemento\");\r\n        String bairro = request.getParameter(\"bairro\");\r\n        String cidade = request.getParameter(\"cidade\");\r\n        String estado = request.getParameter(\"estado\");\r\n\r\n\r\n\r\n        ClienteDao clienteDao = new ClienteDao();\r\n\r\n\r\n        //chama a DAO para atualizar o banco com os dados do formulário\r\n        clienteDao.atualizarEndereco(CPF, CEP, endereco, numero, complemento, bairro, cidade, estado);\r\n\r\n        //Busca do front duas entradas do tipo hidden com o valor e quantidade total da compra\r\n        String qtdTotal = request.getParameter(\"qtdTotal\");\r\n        String vlrTotal = request.getParameter(\"vlrTotal\");\r\n\r\n\r\n        List<ItemCarrinho> listaCarrinho = CarrinhoDao.lerItemCarrinho(CPF);\r\n\r\n        Carrinho carrinho = new Carrinho(CPF, qtdTotal, vlrTotal);\r\n\r\n        DadosEntrega dadosEntrega = ComprasDao.obterUltimaCompraPorCPF(CPF);\r\n\r\n        request.setAttribute(\"CEP\", dadosEntrega.getCEP());\r\n        request.setAttribute(\"endereco\", dadosEntrega.getEndereco());\r\n        request.setAttribute(\"numEndereco\", dadosEntrega.getNumEndereco());\r\n        request.setAttribute(\"complEndereco\", dadosEntrega.getComplEndereco());\r\n        request.setAttribute(\"bairro\", dadosEntrega.getBairro());\r\n        request.setAttribute(\"cidade\", dadosEntrega.getCidade());\r\n        request.setAttribute(\"estado\", dadosEntrega.getEstado());\r\n\r\n        request.setAttribute(\"listaCarrinho\", listaCarrinho);\r\n\r\n        request.setAttribute(\"carrinho\", carrinho);\r\n\r\n        RequestDispatcher dispatcher = request.getRequestDispatcher(\"/TelaFinalizarCompra/FinalizarCompra.jsp\");\r\n        dispatcher.forward(request, response);\r\n\r\n    }\r\n}\r\n\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/java/br/com/lojavinho/servlet/AtualizarEndereco2Servlet.java b/src/main/java/br/com/lojavinho/servlet/AtualizarEndereco2Servlet.java
--- a/src/main/java/br/com/lojavinho/servlet/AtualizarEndereco2Servlet.java	(revision af79a5f9048019b822c35cf90c486df7c08237e4)
+++ b/src/main/java/br/com/lojavinho/servlet/AtualizarEndereco2Servlet.java	(date 1700523933803)
@@ -49,6 +49,7 @@
 
         DadosEntrega dadosEntrega = ComprasDao.obterUltimaCompraPorCPF(CPF);
 
+        request.setAttribute("numSeqEntrega", dadosEntrega.getNumSeqEntrega());
         request.setAttribute("CEP", dadosEntrega.getCEP());
         request.setAttribute("endereco", dadosEntrega.getEndereco());
         request.setAttribute("numEndereco", dadosEntrega.getNumEndereco());
Index: .idea/workspace.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"AutoImportSettings\">\r\n    <option name=\"autoReloadType\" value=\"SELECTIVE\" />\r\n  </component>\r\n  <component name=\"ChangeListManager\">\r\n    <list default=\"true\" id=\"e38ee1df-dff2-431d-b30f-5b3f61edf900\" name=\"Changes\" comment=\"Correção de bug de listagem de itens na tela FinalizarCompra.jsp\">\r\n      <change beforePath=\"$PROJECT_DIR$/.idea/workspace.xml\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/.idea/workspace.xml\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/src/main/webapp/TelaRegistrarEndereco/AtualizarEndereco.jsp\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/src/main/webapp/TelaRegistrarEndereco/AtualizarEndereco.jsp\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/src/main/webapp/TelaRegistrarEndereco/RegistrarEndereco.jsp\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/src/main/webapp/TelaRegistrarEndereco/RegistrarEndereco.jsp\" afterDir=\"false\" />\r\n    </list>\r\n    <option name=\"SHOW_DIALOG\" value=\"false\" />\r\n    <option name=\"HIGHLIGHT_CONFLICTS\" value=\"true\" />\r\n    <option name=\"HIGHLIGHT_NON_ACTIVE_CHANGELIST\" value=\"false\" />\r\n    <option name=\"LAST_RESOLUTION\" value=\"IGNORE\" />\r\n  </component>\r\n  <component name=\"FileTemplateManagerImpl\">\r\n    <option name=\"RECENT_TEMPLATES\">\r\n      <list>\r\n        <option value=\"HTML File\" />\r\n        <option value=\"Class\" />\r\n      </list>\r\n    </option>\r\n  </component>\r\n  <component name=\"Git.Settings\">\r\n    <option name=\"RECENT_GIT_ROOT_PATH\" value=\"$PROJECT_DIR$/..\" />\r\n    <option name=\"UPDATE_TYPE\" value=\"REBASE\" />\r\n  </component>\r\n  <component name=\"MarkdownSettingsMigration\">\r\n    <option name=\"stateVersion\" value=\"1\" />\r\n  </component>\r\n  <component name=\"ProjectColorInfo\">{\r\n  &quot;customColor&quot;: &quot;&quot;,\r\n  &quot;associatedIndex&quot;: 8\r\n}</component>\r\n  <component name=\"ProjectId\" id=\"2WJueBkQUnjNcmMSR6O6Yje1zlB\" />\r\n  <component name=\"ProjectViewState\">\r\n    <option name=\"hideEmptyMiddlePackages\" value=\"true\" />\r\n    <option name=\"showLibraryContents\" value=\"true\" />\r\n  </component>\r\n  <component name=\"PropertiesComponent\">{\r\n  &quot;keyToString&quot;: {\r\n    &quot;ASKED_ADD_EXTERNAL_FILES&quot;: &quot;true&quot;,\r\n    &quot;DefaultHtmlFileTemplate&quot;: &quot;HTML File&quot;,\r\n    &quot;RunOnceActivity.OpenProjectViewOnStart&quot;: &quot;true&quot;,\r\n    &quot;RunOnceActivity.ShowReadmeOnStart&quot;: &quot;true&quot;,\r\n    &quot;SHARE_PROJECT_CONFIGURATION_FILES&quot;: &quot;true&quot;,\r\n    &quot;git-widget-placeholder&quot;: &quot;main&quot;,\r\n    &quot;ignore.virus.scanning.warn.message&quot;: &quot;true&quot;,\r\n    &quot;last_opened_file_path&quot;: &quot;C:/Users/Talles/Desktop/backup/lojavinho&quot;\r\n  }\r\n}</component>\r\n  <component name=\"RecentsManager\">\r\n    <key name=\"MoveFile.RECENT_KEYS\">\r\n      <recent name=\"C:\\Users\\Talles\\Desktop\\loja_de_vinhos_stadscas3nb\\lojavinho\\src\\main\\webapp\\TelaRegistrarEndereco\" />\r\n      <recent name=\"C:\\Users\\Talles\\Desktop\\loja_de_vinhos_stadscas3nb\\lojavinho\\src\\main\\webapp\\TelaDeResultado\" />\r\n      <recent name=\"C:\\Users\\salomao.flima\\IdeaProjects\\loja_de_vinhos_stadscas3nb\\lojavinho\\src\\main\\webapp\\TelaInicial\" />\r\n      <recent name=\"C:\\Users\\salomao.flima\\IdeaProjects\\loja_de_vinhos_stadscas3nb\\lojavinho\\src\\main\\webapp\" />\r\n      <recent name=\"C:\\Users\\salomao.flima\\IdeaProjects\\loja_de_vinhos_stadscas3nb\\lojavinho\\src\\main\\webapp\\TelaDeBusca\" />\r\n    </key>\r\n  </component>\r\n  <component name=\"RunManager\">\r\n    <configuration name=\"lojavinho [tomcat7:run]\" type=\"MavenRunConfiguration\" factoryName=\"Maven\" nameIsGenerated=\"true\">\r\n      <MavenSettings>\r\n        <option name=\"myGeneralSettings\" />\r\n        <option name=\"myRunnerSettings\" />\r\n        <option name=\"myRunnerParameters\">\r\n          <MavenRunnerParameters>\r\n            <option name=\"cmdOptions\" />\r\n            <option name=\"profiles\">\r\n              <set />\r\n            </option>\r\n            <option name=\"goals\">\r\n              <list>\r\n                <option value=\"tomcat7:run\" />\r\n              </list>\r\n            </option>\r\n            <option name=\"pomFileName\" />\r\n            <option name=\"profilesMap\">\r\n              <map />\r\n            </option>\r\n            <option name=\"projectsCmdOptionValues\">\r\n              <list />\r\n            </option>\r\n            <option name=\"resolveToWorkspace\" value=\"false\" />\r\n            <option name=\"workingDirPath\" value=\"$PROJECT_DIR$\" />\r\n          </MavenRunnerParameters>\r\n        </option>\r\n      </MavenSettings>\r\n      <method v=\"2\" />\r\n    </configuration>\r\n  </component>\r\n  <component name=\"SpellCheckerSettings\" RuntimeDictionaries=\"0\" Folders=\"0\" CustomDictionaries=\"0\" DefaultDictionary=\"application-level\" UseSingleDictionary=\"true\" transferred=\"true\" />\r\n  <component name=\"TaskManager\">\r\n    <task active=\"true\" id=\"Default\" summary=\"Default task\">\r\n      <changelist id=\"e38ee1df-dff2-431d-b30f-5b3f61edf900\" name=\"Changes\" comment=\"\" />\r\n      <created>1696463096563</created>\r\n      <option name=\"number\" value=\"Default\" />\r\n      <option name=\"presentableId\" value=\"Default\" />\r\n      <updated>1696463096563</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00001\" summary=\"Criado a tela de produto, classe servlet e sua interação com o servidor.\">\r\n      <created>1697067813694</created>\r\n      <option name=\"number\" value=\"00001\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00001\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1697067813694</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00002\" summary=\"Atribuindo o retorno de resultados através dos cards de harmonização\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1699483115567</created>\r\n      <option name=\"number\" value=\"00002\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00002\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1699483115567</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00003\" summary=\"Adicionando a inserção de itens na tabela carrinho de compras\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1699841978936</created>\r\n      <option name=\"number\" value=\"00003\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00003\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1699841978936</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00004\" summary=\"atualizacao no AdicionarItemServlet para retorno de itens na tela de Carrinho.jsp\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1700011813037</created>\r\n      <option name=\"number\" value=\"00004\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00004\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1700011813038</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00005\" summary=\"Implementação da lógica de estoque dos produtos\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1700079389312</created>\r\n      <option name=\"number\" value=\"00005\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00005\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1700079389312</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00006\" summary=\"Corrigindo bug de exclusão de item no carrinho de compras\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1700441369812</created>\r\n      <option name=\"number\" value=\"00006\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00006\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1700441369812</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00007\" summary=\"Incluido redirecionamento de pagina após preenchimento de formulário de registro de endereço\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1700452358734</created>\r\n      <option name=\"number\" value=\"00007\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00007\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1700452358734</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00008\" summary=\"Incluido redirecionamento de pagina após preenchimento de formulário de registro de endereço\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1700453042679</created>\r\n      <option name=\"number\" value=\"00008\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00008\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1700453042679</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00009\" summary=\"Incluido redirecionamento de pagina após preenchimento de formulário de registro de endereço\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1700453054185</created>\r\n      <option name=\"number\" value=\"00009\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00009\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1700453054185</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00010\" summary=\"Incluido redirecionamento de pagina após preenchimento de formulário de registro de endereço\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1700453175500</created>\r\n      <option name=\"number\" value=\"00010\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00010\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1700453175500</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00011\" summary=\"Implementado botão de alterar endereço de entrega\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1700459091782</created>\r\n      <option name=\"number\" value=\"00011\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00011\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1700459091782</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00012\" summary=\"Implementado botão de alterar endereço de entrega\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1700459108287</created>\r\n      <option name=\"number\" value=\"00012\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00012\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1700459108287</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00013\" summary=\"Implementado botão de alterar endereço de entrega\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1700492985897</created>\r\n      <option name=\"number\" value=\"00013\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00013\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1700492985897</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00014\" summary=\"inserção campos de pagamento\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1700503557466</created>\r\n      <option name=\"number\" value=\"00014\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00014\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1700503557466</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00015\" summary=\"inserção campos de pagamento\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1700503666164</created>\r\n      <option name=\"number\" value=\"00015\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00015\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1700503666164</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00016\" summary=\"inserção campos de pagamento\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1700504362699</created>\r\n      <option name=\"number\" value=\"00016\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00016\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1700504362699</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00017\" summary=\"Correção de bug de listagem de itens na tela FinalizarCompra.jsp\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1700515509525</created>\r\n      <option name=\"number\" value=\"00017\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00017\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1700515509525</updated>\r\n    </task>\r\n    <option name=\"localTasksCounter\" value=\"18\" />\r\n    <servers />\r\n  </component>\r\n  <component name=\"Vcs.Log.Tabs.Properties\">\r\n    <option name=\"TAB_STATES\">\r\n      <map>\r\n        <entry key=\"MAIN\">\r\n          <value>\r\n            <State />\r\n          </value>\r\n        </entry>\r\n      </map>\r\n    </option>\r\n  </component>\r\n  <component name=\"VcsManagerConfiguration\">\r\n    <MESSAGE value=\"Criado a tela de produto, classe servlet e sua interação com o servidor.\" />\r\n    <MESSAGE value=\"Atribuindo o retorno de resultados através dos cards de harmonização\" />\r\n    <MESSAGE value=\"Adicionando a inserção de itens na tabela carrinho de compras\" />\r\n    <MESSAGE value=\"atualizacao no AdicionarItemServlet para retorno de itens na tela de Carrinho.jsp\" />\r\n    <MESSAGE value=\"Implementação da lógica de estoque dos produtos\" />\r\n    <MESSAGE value=\"Corrigindo bug de exclusão de item no carrinho de compras\" />\r\n    <MESSAGE value=\"Incluido redirecionamento de pagina após preenchimento de formulário de registro de endereço\" />\r\n    <MESSAGE value=\"Implementado botão de alterar endereço de entrega\" />\r\n    <MESSAGE value=\"inserção campos de pagamento\" />\r\n    <MESSAGE value=\"Correção de bug de listagem de itens na tela FinalizarCompra.jsp\" />\r\n    <option name=\"LAST_COMMIT_MESSAGE\" value=\"Correção de bug de listagem de itens na tela FinalizarCompra.jsp\" />\r\n  </component>\r\n  <component name=\"XDebuggerManager\">\r\n    <breakpoint-manager>\r\n      <breakpoints>\r\n        <line-breakpoint enabled=\"true\" type=\"java-line\">\r\n          <url>file://$PROJECT_DIR$/src/main/java/br/com/lojavinho/servlet/RegistroEnderecoServle.java</url>\r\n          <line>21</line>\r\n          <option name=\"timeStamp\" value=\"48\" />\r\n        </line-breakpoint>\r\n        <line-breakpoint enabled=\"true\" type=\"java-line\">\r\n          <url>file://$PROJECT_DIR$/src/main/java/br/com/lojavinho/servlet/RegistroEnderecoServle.java</url>\r\n          <line>22</line>\r\n          <option name=\"timeStamp\" value=\"49\" />\r\n        </line-breakpoint>\r\n        <line-breakpoint enabled=\"true\" type=\"java-line\">\r\n          <url>file://$PROJECT_DIR$/src/main/java/br/com/lojavinho/servlet/RegistroEnderecoServle.java</url>\r\n          <line>23</line>\r\n          <option name=\"timeStamp\" value=\"50\" />\r\n        </line-breakpoint>\r\n        <line-breakpoint enabled=\"true\" type=\"java-line\">\r\n          <url>file://$PROJECT_DIR$/src/main/java/br/com/lojavinho/servlet/RegistroEnderecoServle.java</url>\r\n          <line>24</line>\r\n          <option name=\"timeStamp\" value=\"51\" />\r\n        </line-breakpoint>\r\n        <line-breakpoint enabled=\"true\" type=\"java-line\">\r\n          <url>file://$PROJECT_DIR$/src/main/java/br/com/lojavinho/servlet/RegistroEnderecoServle.java</url>\r\n          <line>25</line>\r\n          <option name=\"timeStamp\" value=\"52\" />\r\n        </line-breakpoint>\r\n        <line-breakpoint enabled=\"true\" type=\"java-line\">\r\n          <url>file://$PROJECT_DIR$/src/main/java/br/com/lojavinho/servlet/RegistroEnderecoServle.java</url>\r\n          <line>26</line>\r\n          <option name=\"timeStamp\" value=\"53\" />\r\n        </line-breakpoint>\r\n        <line-breakpoint enabled=\"true\" type=\"java-line\">\r\n          <url>file://$PROJECT_DIR$/src/main/java/br/com/lojavinho/servlet/RegistroEnderecoServle.java</url>\r\n          <line>27</line>\r\n          <option name=\"timeStamp\" value=\"54\" />\r\n        </line-breakpoint>\r\n        <line-breakpoint enabled=\"true\" type=\"java-line\">\r\n          <url>file://$PROJECT_DIR$/src/main/java/br/com/lojavinho/servlet/RegistroEnderecoServle.java</url>\r\n          <line>28</line>\r\n          <option name=\"timeStamp\" value=\"55\" />\r\n        </line-breakpoint>\r\n      </breakpoints>\r\n    </breakpoint-manager>\r\n  </component>\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/workspace.xml b/.idea/workspace.xml
--- a/.idea/workspace.xml	(revision af79a5f9048019b822c35cf90c486df7c08237e4)
+++ b/.idea/workspace.xml	(date 1700588712613)
@@ -4,10 +4,15 @@
     <option name="autoReloadType" value="SELECTIVE" />
   </component>
   <component name="ChangeListManager">
-    <list default="true" id="e38ee1df-dff2-431d-b30f-5b3f61edf900" name="Changes" comment="Correção de bug de listagem de itens na tela FinalizarCompra.jsp">
+    <list default="true" id="e38ee1df-dff2-431d-b30f-5b3f61edf900" name="Changes" comment="Melhorias nas telas de RegistrarEndereco.jsp e AtualizarEndereco.jsp">
+      <change beforePath="$PROJECT_DIR$/../ScriptBD/Scripts_Create_Tabelas.txt" beforeDir="false" afterPath="$PROJECT_DIR$/../ScriptBD/Scripts_Create_Tabelas.txt" afterDir="false" />
       <change beforePath="$PROJECT_DIR$/.idea/workspace.xml" beforeDir="false" afterPath="$PROJECT_DIR$/.idea/workspace.xml" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/src/main/webapp/TelaRegistrarEndereco/AtualizarEndereco.jsp" beforeDir="false" afterPath="$PROJECT_DIR$/src/main/webapp/TelaRegistrarEndereco/AtualizarEndereco.jsp" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/src/main/webapp/TelaRegistrarEndereco/RegistrarEndereco.jsp" beforeDir="false" afterPath="$PROJECT_DIR$/src/main/webapp/TelaRegistrarEndereco/RegistrarEndereco.jsp" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/src/main/java/br/com/lojavinho/dao/ComprasDao.java" beforeDir="false" afterPath="$PROJECT_DIR$/src/main/java/br/com/lojavinho/dao/ComprasDao.java" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/src/main/java/br/com/lojavinho/model/DadosEntrega.java" beforeDir="false" afterPath="$PROJECT_DIR$/src/main/java/br/com/lojavinho/model/DadosEntrega.java" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/src/main/java/br/com/lojavinho/servlet/AtualizarEndereco2Servlet.java" beforeDir="false" afterPath="$PROJECT_DIR$/src/main/java/br/com/lojavinho/servlet/AtualizarEndereco2Servlet.java" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/src/main/java/br/com/lojavinho/servlet/FinalizarCompraServlet.java" beforeDir="false" afterPath="$PROJECT_DIR$/src/main/java/br/com/lojavinho/servlet/FinalizarCompraServlet.java" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/src/main/java/br/com/lojavinho/servlet/RegistroEnderecoServlet.java" beforeDir="false" afterPath="$PROJECT_DIR$/src/main/java/br/com/lojavinho/servlet/RegistroEnderecoServlet.java" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/src/main/webapp/TelaFinalizarCompra/FinalizarCompra.jsp" beforeDir="false" afterPath="$PROJECT_DIR$/src/main/webapp/TelaFinalizarCompra/FinalizarCompra.jsp" afterDir="false" />
     </list>
     <option name="SHOW_DIALOG" value="false" />
     <option name="HIGHLIGHT_CONFLICTS" value="true" />
@@ -234,7 +239,15 @@
       <option name="project" value="LOCAL" />
       <updated>1700515509525</updated>
     </task>
-    <option name="localTasksCounter" value="18" />
+    <task id="LOCAL-00018" summary="Melhorias nas telas de RegistrarEndereco.jsp e AtualizarEndereco.jsp">
+      <option name="closed" value="true" />
+      <created>1700519136131</created>
+      <option name="number" value="00018" />
+      <option name="presentableId" value="LOCAL-00018" />
+      <option name="project" value="LOCAL" />
+      <updated>1700519136131</updated>
+    </task>
+    <option name="localTasksCounter" value="19" />
     <servers />
   </component>
   <component name="Vcs.Log.Tabs.Properties">
@@ -259,7 +272,8 @@
     <MESSAGE value="Implementado botão de alterar endereço de entrega" />
     <MESSAGE value="inserção campos de pagamento" />
     <MESSAGE value="Correção de bug de listagem de itens na tela FinalizarCompra.jsp" />
-    <option name="LAST_COMMIT_MESSAGE" value="Correção de bug de listagem de itens na tela FinalizarCompra.jsp" />
+    <MESSAGE value="Melhorias nas telas de RegistrarEndereco.jsp e AtualizarEndereco.jsp" />
+    <option name="LAST_COMMIT_MESSAGE" value="Melhorias nas telas de RegistrarEndereco.jsp e AtualizarEndereco.jsp" />
   </component>
   <component name="XDebuggerManager">
     <breakpoint-manager>
@@ -303,6 +317,116 @@
           <url>file://$PROJECT_DIR$/src/main/java/br/com/lojavinho/servlet/RegistroEnderecoServle.java</url>
           <line>28</line>
           <option name="timeStamp" value="55" />
+        </line-breakpoint>
+        <line-breakpoint enabled="true" type="java-line">
+          <url>file://$PROJECT_DIR$/src/main/java/br/com/lojavinho/servlet/RegistroEnderecoServlet.java</url>
+          <line>52</line>
+          <option name="timeStamp" value="58" />
+        </line-breakpoint>
+        <line-breakpoint enabled="true" type="java-line">
+          <url>file://$PROJECT_DIR$/src/main/java/br/com/lojavinho/servlet/RegistroEnderecoServlet.java</url>
+          <line>53</line>
+          <option name="timeStamp" value="59" />
+        </line-breakpoint>
+        <line-breakpoint enabled="true" type="java-line">
+          <url>file://$PROJECT_DIR$/src/main/java/br/com/lojavinho/servlet/RegistroEnderecoServlet.java</url>
+          <line>54</line>
+          <option name="timeStamp" value="60" />
+        </line-breakpoint>
+        <line-breakpoint enabled="true" type="java-line">
+          <url>file://$PROJECT_DIR$/src/main/java/br/com/lojavinho/servlet/RegistroEnderecoServlet.java</url>
+          <line>55</line>
+          <option name="timeStamp" value="61" />
+        </line-breakpoint>
+        <line-breakpoint enabled="true" type="java-line">
+          <url>file://$PROJECT_DIR$/src/main/java/br/com/lojavinho/servlet/RegistroEnderecoServlet.java</url>
+          <line>56</line>
+          <option name="timeStamp" value="62" />
+        </line-breakpoint>
+        <line-breakpoint enabled="true" type="java-line">
+          <url>file://$PROJECT_DIR$/src/main/java/br/com/lojavinho/servlet/RegistroEnderecoServlet.java</url>
+          <line>57</line>
+          <option name="timeStamp" value="63" />
+        </line-breakpoint>
+        <line-breakpoint enabled="true" type="java-line">
+          <url>file://$PROJECT_DIR$/src/main/java/br/com/lojavinho/servlet/RegistroEnderecoServlet.java</url>
+          <line>58</line>
+          <option name="timeStamp" value="64" />
+        </line-breakpoint>
+        <line-breakpoint enabled="true" type="java-line">
+          <url>file://$PROJECT_DIR$/src/main/java/br/com/lojavinho/servlet/RegistroEnderecoServlet.java</url>
+          <line>59</line>
+          <option name="timeStamp" value="65" />
+        </line-breakpoint>
+        <line-breakpoint enabled="true" type="java-line">
+          <url>file://$PROJECT_DIR$/src/main/java/br/com/lojavinho/servlet/RegistroEnderecoServlet.java</url>
+          <line>61</line>
+          <option name="timeStamp" value="66" />
+        </line-breakpoint>
+        <line-breakpoint enabled="true" type="java-line">
+          <url>file://$PROJECT_DIR$/src/main/java/br/com/lojavinho/servlet/RegistroEnderecoServlet.java</url>
+          <line>63</line>
+          <option name="timeStamp" value="67" />
+        </line-breakpoint>
+        <line-breakpoint enabled="true" type="java-line">
+          <url>file://$PROJECT_DIR$/src/main/java/br/com/lojavinho/servlet/RegistroEnderecoServlet.java</url>
+          <line>65</line>
+          <option name="timeStamp" value="68" />
+        </line-breakpoint>
+        <line-breakpoint enabled="true" type="java-line">
+          <url>file://$PROJECT_DIR$/src/main/java/br/com/lojavinho/servlet/RegistroEnderecoServlet.java</url>
+          <line>50</line>
+          <option name="timeStamp" value="69" />
+        </line-breakpoint>
+        <line-breakpoint enabled="true" type="java-line">
+          <url>file://$PROJECT_DIR$/src/main/java/br/com/lojavinho/dao/ComprasDao.java</url>
+          <line>49</line>
+          <option name="timeStamp" value="70" />
+        </line-breakpoint>
+        <line-breakpoint enabled="true" type="java-line">
+          <url>file://$PROJECT_DIR$/src/main/java/br/com/lojavinho/dao/ComprasDao.java</url>
+          <line>50</line>
+          <option name="timeStamp" value="71" />
+        </line-breakpoint>
+        <line-breakpoint enabled="true" type="java-line">
+          <url>file://$PROJECT_DIR$/src/main/java/br/com/lojavinho/dao/ComprasDao.java</url>
+          <line>51</line>
+          <option name="timeStamp" value="72" />
+        </line-breakpoint>
+        <line-breakpoint enabled="true" type="java-line">
+          <url>file://$PROJECT_DIR$/src/main/java/br/com/lojavinho/dao/ComprasDao.java</url>
+          <line>52</line>
+          <option name="timeStamp" value="73" />
+        </line-breakpoint>
+        <line-breakpoint enabled="true" type="java-line">
+          <url>file://$PROJECT_DIR$/src/main/java/br/com/lojavinho/dao/ComprasDao.java</url>
+          <line>53</line>
+          <option name="timeStamp" value="74" />
+        </line-breakpoint>
+        <line-breakpoint enabled="true" type="java-line">
+          <url>file://$PROJECT_DIR$/src/main/java/br/com/lojavinho/dao/ComprasDao.java</url>
+          <line>54</line>
+          <option name="timeStamp" value="75" />
+        </line-breakpoint>
+        <line-breakpoint enabled="true" type="java-line">
+          <url>file://$PROJECT_DIR$/src/main/java/br/com/lojavinho/dao/ComprasDao.java</url>
+          <line>56</line>
+          <option name="timeStamp" value="76" />
+        </line-breakpoint>
+        <line-breakpoint enabled="true" type="java-line">
+          <url>file://$PROJECT_DIR$/src/main/java/br/com/lojavinho/dao/ComprasDao.java</url>
+          <line>55</line>
+          <option name="timeStamp" value="77" />
+        </line-breakpoint>
+        <line-breakpoint enabled="true" type="java-line">
+          <url>file://$PROJECT_DIR$/src/main/java/br/com/lojavinho/dao/ComprasDao.java</url>
+          <line>59</line>
+          <option name="timeStamp" value="78" />
+        </line-breakpoint>
+        <line-breakpoint enabled="true" type="java-line">
+          <url>file://$PROJECT_DIR$/src/main/java/br/com/lojavinho/dao/ComprasDao.java</url>
+          <line>64</line>
+          <option name="timeStamp" value="79" />
         </line-breakpoint>
       </breakpoints>
     </breakpoint-manager>
Index: src/main/java/br/com/lojavinho/model/DadosEntrega.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package br.com.lojavinho.model;\r\n\r\npublic class DadosEntrega {\r\n\r\n\r\n    private String numCPF;\r\n    private String CEP;\r\n    private String endereco;\r\n    private String numEndereco;\r\n    private String complEndereco;\r\n    private String bairro;\r\n    private String cidade;\r\n    private String estado;\r\n\r\n    public DadosEntrega(String CEP, String endereco, String numEndereco, String complEndereco, String bairro, String cidade, String estado) {\r\n        this.CEP = CEP;\r\n        this.endereco = endereco;\r\n        this.numEndereco = numEndereco;\r\n        this.complEndereco = complEndereco;\r\n        this.bairro = bairro;\r\n        this.cidade = cidade;\r\n        this.estado = estado;\r\n    }\r\n\r\n    public String getNumCPF() {\r\n        return numCPF;\r\n    }\r\n\r\n    public void setNumCPF(String numCPF) {\r\n        this.numCPF = numCPF;\r\n    }\r\n\r\n    public String getCEP() {\r\n        return CEP;\r\n    }\r\n\r\n    public void setCEP(String CEP) {\r\n        this.CEP = CEP;\r\n    }\r\n\r\n    public String getEndereco() {\r\n        return endereco;\r\n    }\r\n\r\n    public void setEndereco(String endereco) {\r\n        this.endereco = endereco;\r\n    }\r\n\r\n    public String getNumEndereco() {\r\n        return numEndereco;\r\n    }\r\n\r\n    public void setNumEndereco(String numEndereco) {\r\n        this.numEndereco = numEndereco;\r\n    }\r\n\r\n    public String getComplEndereco() {\r\n        return complEndereco;\r\n    }\r\n\r\n    public void setComplEndereco(String complEndereco) {\r\n        this.complEndereco = complEndereco;\r\n    }\r\n\r\n    public String getBairro() {\r\n        return bairro;\r\n    }\r\n\r\n    public void setBairro(String bairro) {\r\n        this.bairro = bairro;\r\n    }\r\n\r\n    public String getCidade() {\r\n        return cidade;\r\n    }\r\n\r\n    public void setCidade(String cidade) {\r\n        this.cidade = cidade;\r\n    }\r\n\r\n    public String getEstado() {\r\n        return estado;\r\n    }\r\n\r\n    public void setEstado(String estado) {\r\n        this.estado = estado;\r\n    }\r\n}\r\n\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/java/br/com/lojavinho/model/DadosEntrega.java b/src/main/java/br/com/lojavinho/model/DadosEntrega.java
--- a/src/main/java/br/com/lojavinho/model/DadosEntrega.java	(revision af79a5f9048019b822c35cf90c486df7c08237e4)
+++ b/src/main/java/br/com/lojavinho/model/DadosEntrega.java	(date 1700523649513)
@@ -4,6 +4,7 @@
 
 
     private String numCPF;
+    private String numSeqEntrega;
     private String CEP;
     private String endereco;
     private String numEndereco;
@@ -12,7 +13,8 @@
     private String cidade;
     private String estado;
 
-    public DadosEntrega(String CEP, String endereco, String numEndereco, String complEndereco, String bairro, String cidade, String estado) {
+    public DadosEntrega(String numSeqEntrega, String CEP, String endereco, String numEndereco, String complEndereco, String bairro, String cidade, String estado) {
+        this.numSeqEntrega = numSeqEntrega;
         this.CEP = CEP;
         this.endereco = endereco;
         this.numEndereco = numEndereco;
@@ -30,6 +32,14 @@
         this.numCPF = numCPF;
     }
 
+    public String getNumSeqEntrega() {
+        return numSeqEntrega;
+    }
+
+    public void setNumSeqEntrega(String numSeqEntrega) {
+        this.numSeqEntrega = numSeqEntrega;
+    }
+
     public String getCEP() {
         return CEP;
     }
Index: src/main/java/br/com/lojavinho/servlet/RegistroEnderecoServlet.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package br.com.lojavinho.servlet;\r\n\r\nimport br.com.lojavinho.dao.CarrinhoDao;\r\nimport br.com.lojavinho.dao.ClienteDao;\r\nimport br.com.lojavinho.dao.ComprasDao;\r\nimport br.com.lojavinho.model.Carrinho;\r\nimport br.com.lojavinho.model.DadosEntrega;\r\nimport br.com.lojavinho.model.ItemCarrinho;\r\n\r\nimport javax.servlet.RequestDispatcher;\r\nimport javax.servlet.ServletException;\r\nimport javax.servlet.annotation.WebServlet;\r\nimport javax.servlet.http.HttpServlet;\r\nimport javax.servlet.http.HttpServletRequest;\r\nimport javax.servlet.http.HttpServletResponse;\r\nimport java.io.IOException;\r\nimport java.util.List;\r\n\r\n@WebServlet(\"/registroEndereco\")\r\n\r\npublic class RegistroEnderecoServlet extends HttpServlet {\r\n\r\n    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\r\n\r\n        String CPF = request.getParameter(\"numCPF\");\r\n        String CEP = request.getParameter(\"CEP\");\r\n        String endereco = request.getParameter(\"endereco\");\r\n        String numero = request.getParameter(\"numero\");\r\n        String complemento = request.getParameter(\"complemento\");\r\n        String bairro = request.getParameter(\"bairro\");\r\n        String cidade = request.getParameter(\"cidade\");\r\n        String estado = request.getParameter(\"estado\");\r\n\r\n\r\n\r\n        ClienteDao clienteDao = new ClienteDao();\r\n\r\n\r\n\r\n        clienteDao.registrarEndereco(CPF, CEP, endereco, numero, complemento, bairro, cidade, estado);\r\n\r\n\r\n        String qtdTotal = request.getParameter(\"qtdTotal\");\r\n        String vlrTotal = request.getParameter(\"vlrTotal\");\r\n\r\n\r\n        Carrinho carrinho = new Carrinho(CPF, qtdTotal, vlrTotal);\r\n\r\n        List<ItemCarrinho> listaCarrinho = CarrinhoDao.lerItemCarrinho(CPF);\r\n\r\n        DadosEntrega dadosEntrega = ComprasDao.obterUltimaCompraPorCPF(CPF);\r\n\r\n        request.setAttribute(\"CEP\", dadosEntrega.getCEP());\r\n        request.setAttribute(\"endereco\", dadosEntrega.getEndereco());\r\n        request.setAttribute(\"numEndereco\", dadosEntrega.getNumEndereco());\r\n        request.setAttribute(\"complEndereco\", dadosEntrega.getComplEndereco());\r\n        request.setAttribute(\"bairro\", dadosEntrega.getBairro());\r\n        request.setAttribute(\"cidade\", dadosEntrega.getCidade());\r\n        request.setAttribute(\"estado\", dadosEntrega.getEstado());\r\n\r\n        request.setAttribute(\"carrinho\", carrinho);\r\n\r\n        request.setAttribute(\"listaCarrinho\", listaCarrinho);\r\n\r\n        RequestDispatcher dispatcher = request.getRequestDispatcher(\"/TelaFinalizarCompra/FinalizarCompra.jsp\");\r\n        dispatcher.forward(request, response);\r\n\r\n\r\n\r\n\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/java/br/com/lojavinho/servlet/RegistroEnderecoServlet.java b/src/main/java/br/com/lojavinho/servlet/RegistroEnderecoServlet.java
--- a/src/main/java/br/com/lojavinho/servlet/RegistroEnderecoServlet.java	(revision af79a5f9048019b822c35cf90c486df7c08237e4)
+++ b/src/main/java/br/com/lojavinho/servlet/RegistroEnderecoServlet.java	(date 1700524015440)
@@ -50,6 +50,7 @@
 
         DadosEntrega dadosEntrega = ComprasDao.obterUltimaCompraPorCPF(CPF);
 
+        request.setAttribute("numSeqEntrega", dadosEntrega.getNumSeqEntrega());
         request.setAttribute("CEP", dadosEntrega.getCEP());
         request.setAttribute("endereco", dadosEntrega.getEndereco());
         request.setAttribute("numEndereco", dadosEntrega.getNumEndereco());
